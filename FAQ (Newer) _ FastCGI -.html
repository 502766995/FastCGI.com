<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0089)https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/6?q=node/18 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"><script type="text/javascript">window["_gaUserPrefs"] = { ioo : function() { return true; } }</script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<script type="text/javascript" src="https://web.archive.org/static/js/analytics.js"></script><style>#content > #right > .dose > .dosesingle,
#content > #center > .dose > .dosesingle
{display:none !important;}</style>
<script type="text/javascript">archive_analytics.values.server_name="wwwb-app34.us.archive.org";archive_analytics.values.server_ms=566;</script>
<link type="text/css" rel="stylesheet" href="./FAQ (Newer) _ FastCGI -_files/banner-styles.css">


<title>FAQ (Newer) | FastCGI - </title>

<link type="text/css" rel="stylesheet" media="all" href="./FAQ (Newer) _ FastCGI -_files/node.css">
<link type="text/css" rel="stylesheet" media="all" href="./FAQ (Newer) _ FastCGI -_files/defaults.css">
<link type="text/css" rel="stylesheet" media="all" href="./FAQ (Newer) _ FastCGI -_files/system.css">
<link type="text/css" rel="stylesheet" media="all" href="./FAQ (Newer) _ FastCGI -_files/system-menus.css">
<link type="text/css" rel="stylesheet" media="all" href="./FAQ (Newer) _ FastCGI -_files/user.css">
<link type="text/css" rel="stylesheet" media="all" href="./FAQ (Newer) _ FastCGI -_files/style.css">
</head>
<body><div id="wm-ipp" lang="en" style="display: none;">

<div style="position:fixed;left:0;top:0;width:100%!important">
<div id="wm-ipp-inside">
   <table style="width:100%;"><tbody><tr>
   <td id="wm-logo">
       <a href="https://web.archive.org/web/" title="Wayback Machine home page"><img src="./FAQ (Newer) _ FastCGI -_files/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"></a>
   </td>
   <td class="c">
       <table style="margin:0 auto;"><tbody><tr>
       <td class="u" colspan="2">
       <form target="_top" method="get" action="https://web.archive.org/web/form-submit.jsp" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="http://www.fastcgi.com/drupal/node/6?q=node/18" style="width:400px;" onfocus="this.focus();this.select();"><input type="hidden" name="type" value="replay"><input type="hidden" name="date" value="20130123131717"><input type="submit" value="Go"><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td class="n" rowspan="2">
           <table><tbody>
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr class="m">
           	<td class="b" nowrap="nowrap">
		
		    <a href="https://web.archive.org/web/20121102121938/http://www.fastcgi.com/drupal/node/6?q=node/18" title="2 nov. 2012">NOV.</a>
		
		</td>
		<td class="c" id="displayMonthEl" title="You are here: 13:17:17 janv. 23, 2013">JANV.</td>
		<td class="f" nowrap="nowrap">
		
		    <a href="https://web.archive.org/web/20150208033336/http://www.fastcgi.com/drupal/node/6?q=node/18" title="8 févr. 2015"><strong>FÉVR.</strong></a>
		
                </td>
	    </tr>
           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr class="d">
               <td class="b" nowrap="nowrap">
               
                   <a href="https://web.archive.org/web/20121102121938/http://www.fastcgi.com/drupal/node/6?q=node/18" title="12:19:38 nov. 2, 2012"><img src="./FAQ (Newer) _ FastCGI -_files/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0"></a>
               
               </td>
               <td class="c" id="displayDayEl" style="width:34px;font-size:24px;" title="You are here: 13:17:17 janv. 23, 2013">23</td>
	       <td class="f" nowrap="nowrap">
               
		   <a href="https://web.archive.org/web/20150208033336/http://www.fastcgi.com/drupal/node/6?q=node/18" title="3:33:36 févr. 8, 2015"><img src="./FAQ (Newer) _ FastCGI -_files/wm_tb_nxt_on.png" alt="Next capture" width="14" height="16" border="0"></a>
	       
	       </td>
           </tr>
           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr class="y">
	       <td class="b" nowrap="nowrap">
               
                   <a href="https://web.archive.org/web/20120109050634/http://www.fastcgi.com/drupal/node/6?q=node/18" title="9 janv. 2012"><strong>2012</strong></a>
               
               </td>
               <td class="c" id="displayYearEl" title="You are here: 13:17:17 janv. 23, 2013">2013</td>
	       <td class="f" nowrap="nowrap">
               
	           <a href="https://web.archive.org/web/20150208033336/http://www.fastcgi.com/drupal/node/6?q=node/18" title="8 févr. 2015"><strong>2015</strong></a>
	       
	       </td>
           </tr>
           </tbody></table>
       </td>
       </tr>
       <tr>
       <td class="s">
           <a class="t" href="https://web.archive.org/web/20130123131717*/http://www.fastcgi.com/drupal/node/6?q=node/18" title="See a list of every capture for this URL">27 captures</a>
           <div class="r" title="Timespan for captures of this URL">29 sept. 08 - 18 mars 16</div>
       </td>
       <td class="k">
       <a href="" id="wm-graph-anchor">
       <div id="wm-ipp-sparkline" title="Explore captures for this URL">
	 <img id="sparklineImgId" alt="sparklines" onmouseover="__wm.st(1)" onmouseout="__wm.st(0)" onmousemove="__wm.mv(event,this)" width="525" height="27" border="0" src="./FAQ (Newer) _ FastCGI -_files/graph.jsp">
       <div class="yt" style="display: none; width: 25px; height: 27px;"></div><div class="mt" style="display: none; width: 2px; height: 27px;"></div></div>
       </a>
       </td>
       </tr></tbody></table>
   </td>
   <td class="r">
       <a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/6?q=node/18#close" onclick="__wm.h();return false;" style="background-image:url(/static/images/toolbar/wm_tb_close.png);top:5px;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="background-image:url(/static/images/toolbar/wm_tb_help.png);bottom:5px;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>
</div>
</div>
</div>


<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script type="text/javascript" src="./FAQ (Newer) _ FastCGI -_files/disclaim-element.js"></script>
<script type="text/javascript" src="./FAQ (Newer) _ FastCGI -_files/graph-calc.js"></script>
<script type="text/javascript">//<![CDATA[
var __wm = (function(imgWidth,imgHeight,yearImgWidth,monthImgWidth){
var wbPrefix = "/web/";
var wbCurrentUrl = "http://www.fastcgi.com/drupal/node/6?q=node/18";

var firstYear = 1996;
var displayDay = "23";
var displayMonth = "janv.";
var displayYear = "2013";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
var $D=document,$=function(n){return document.getElementById(n)};
var trackerVal,curYear = -1,curMonth = -1;
var yearTracker,monthTracker;
function showTrackers(val) {
  if (val===trackerVal) return;
  var $ipp=$("wm-ipp");
  var $y=$("displayYearEl"),$m=$("displayMonthEl"),$d=$("displayDayEl");
  if (val) {
    $ipp.className="hi";
  } else {
    $ipp.className="";
    $y.innerHTML=displayYear;$m.innerHTML=displayMonth;$d.innerHTML=displayDay;
  }
  yearTracker.style.display=val?"inline":"none";
  monthTracker.style.display=val?"inline":"none";
  trackerVal = val;
}
function trackMouseMove(event,element) {
  var eventX = getEventX(event);
  var elementX = getElementX(element);
  var xOff = Math.min(Math.max(0, eventX - elementX),imgWidth);
  var monthOff = xOff % yearImgWidth;

  var year = Math.floor(xOff / yearImgWidth);
  var monthOfYear = Math.min(11,Math.floor(monthOff / monthImgWidth));
  // 1 extra border pixel at the left edge of the year:
  var month = (year * 12) + monthOfYear;
  var day = monthOff % 2==1?15:1;
  var dateString = zeroPad(year + firstYear) + zeroPad(monthOfYear+1,2) +
    zeroPad(day,2) + "000000";

  $("displayYearEl").innerHTML=year+firstYear;
  $("displayMonthEl").innerHTML=prettyMonths[monthOfYear];
  // looks too jarring when it changes..
  //$("displayDayEl").innerHTML=zeroPad(day,2);
  var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
  $("wm-graph-anchor").href=url;

  if(curYear != year) {
    var yrOff = year * yearImgWidth;
    yearTracker.style.left = yrOff + "px";
    curYear = year;
  }
  if(curMonth != month) {
    var mtOff = year + (month * monthImgWidth) + 1;
    monthTracker.style.left = mtOff + "px";
    curMonth = month;
  }
}
function hideToolbar() {
  $("wm-ipp").style.display="none";
}
function bootstrap() {
  var $spk=$("wm-ipp-sparkline");
  yearTracker=$D.createElement('div');
  yearTracker.className='yt';
  with(yearTracker.style){
    display='none';width=yearImgWidth+"px";height=imgHeight+"px";
  }
  monthTracker=$D.createElement('div');
  monthTracker.className='mt';
  with(monthTracker.style){
    display='none';width=monthImgWidth+"px";height=imgHeight+"px";
  }
  $spk.appendChild(yearTracker);
  $spk.appendChild(monthTracker);

  var $ipp=$("wm-ipp");
  $ipp&&disclaimElement($ipp);
}
return{st:showTrackers,mv:trackMouseMove,h:hideToolbar,bt:bootstrap};
})(525, 27, 25, 2);//]]>
</script>
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  min-width:800px !important;
}
</style>

<script type="text/javascript">__wm.bt();</script>
<!-- END WAYBACK TOOLBAR INSERT -->





<div id="wrapper">
	<div id="logo"></div>
	<div id="nav">
		<ul class="nav-links primary-nav-links"><li class="menu-49 first"><a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/2">FastCGI</a></li>
<li class="menu-53"><a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/19">News</a></li>
<li class="menu-45"><a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/6">Documentation</a></li>
<li class="menu-44"><a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/5">API/Libraries</a></li>
<li class="menu-43"><a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/3">FastCGI Servers</a></li>
<li class="menu-46"><a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/7">Misc.</a></li>
<li class="menu-48"><a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/12">Help!</a></li>
<li class="menu-47 last"><a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/8">About Us</a></li>
</ul>		</div>
	<div id="heading">
		FAQ (Newer)	</div> <!-- end heading -->
	<div id="content">
												<div id="node-18" class="node">



  
  <div class="content">
    <ul>
<li><a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/6?q=node/18#incomplete_headers">FastCGI: incomplete headers (d bytes) received from server "s"</a></li>
<li><a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/6?q=node/18#windows_dll">Why is Windows reporting that it is unable to locate a DLL?</a></li>
<li><a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/6?q=node/18#fork">How do I use fork or exec?</a></li>
<li><a href="https://web.archive.org/web/20130123131717/http://www.fastcgi.com/drupal/node/6?q=node/18#signals">How should I handle signals?</a></li>
</ul>

<hr>

<ul>
<li><a name="incomplete_headers">FastCGI: incomplete headers (d bytes) received from server "s"</a><br>
<p>The FastCGI application, s, did not terminate the headers properly. A total of d bytes were recieved.</p>

<p>Headers are terminated by an empty line, e.g.</p>
<pre>    printf("Content-type: text/html\r\nStatus: 200 OK\r\n\r\n");
</pre>
<p>
See the <a href="https://web.archive.org/web/20130123131717/http://hoohoo.ncsa.uiuc.edu/cgi/interface.html">CGI specification</a> for more
information.
</p>
</li>

&lt;!-- ==== Separator for us humans ==== --&gt;

<li><a name="windows_dll">Why is Windows reporting that it is unable to locate a DLL?</a><br>
<p>Windows first searches the set of pre-installed DLLs such as the performance library (KERNEL32.DLL) and the security library (USER32.DLL). It then searches for the DLLs in the following sequence:

</p><ol>
<li>The directory where the executable module for the current process is located.</li>
<li>The current directory.</li>
<li>The Windows system directory. The GetSystemDirectory function retrieves the path of this directory.</li>
<li>The Windows directory. The GetWindowsDirectory function retrieves the path of this directory.</li>
<li>The directories listed in the PATH environment variable.</li>
</ol>

<p></p><p>Note that the LIBPATH environment variable is not used.</p>

<p>mod_fastcgi, by default, clears the environment of FastCGI applications it starts (with the exception of SystemRoot). To pass or set an environment variable to a FastCGI application use the -initial-env argument to FastCgiConfig or FastCgiServer. </p>
</li>

&lt;!-- ==== Separator for us humans ==== --&gt;

<li><a name="fork">How do I use fork or exec?</a>

<p>When a request handle object is destroyed that has accepted a connection without finishing it, the connection will automatically be finished. Usually, this is what you want, although it is preferable to explicitly call the Finish() method.</p>

<p>When you fork, however, without calling exec as well, i.e. when you have two instance of perl running, the request handle object will (eventually) be destroyed in both instances of perl. As a result, a possible request being handled will be finished when the object is destroyed for the first time. This is probably not what you expect, since you will usually only be handling the request in either the parent or the child. To inhibit this unwanted request finishing, you can send the Detach() message to the request handle object. In a detached state, destruction will not lead to any finishing of requests. It is advised you call Detach() before forking and Attach afterwards (in the process that will continue handling the request).</p>

<p>Before doing this though, please think about whether or not you really need to fork inside the accept loop. Since the FastCGI paradigm is different from the normal CGI one, you'll find that there are situations where you would fork in a CGI context, whereas it may not be necessary in a FastCGI context. In other cases, you're better off doing the forking before the accept loop.</p>

<p>Conversely, when you call exec without forking, the object will not be destroyed and no connection will automatically be finished, so in that case you are forced to do it yourself.</p>

<pre>#!/usr/bin/perl
use strict;
use warnings;

use FCGI;

my $request = FCGI::Request();

while ($request-&gt;Accept() &gt;= 0) {
    # do stuff with $request

    $request-&gt;Detach();

    my $child;
    $child = fork;
    if (!defined $child) {
        # error handling
    } elsif ($child == 0) {
        # do child stuff
    }
    $request-&gt;Attach();

    # continue processing request

    $request-&gt;Finish();
}
</pre>

&lt;!-- ==== Separator for us humans ==== --&gt;

</li><li><a name="signals">How should I handle signals?</a>

<p>All FastCGI applications should handle PIPE and TERM , mod_fastcgi spawned applications should also handle USR1.</p>

<p>PIPE occurs when trying to write/print to a file descriptor that has been closed.  Under mod_fastcgi, if a client aborts a connection before it completes mod_fastcgi does too.  At a minimum, SIGPIPE should be ignored (this is already setup in applications spawned by mod_fastcgi).  Ideally, it should result in an early abort of the request handling within your application and a return to the top of the FastCGI accept() loop.</p>

<p>USR1 may be received by FastCGI applications spawned by mod_fastcgi.  Apache uses this signal to request a "graceful" process shutdown (e.g. its used by "apachectl restart").  When mod_fastcgi's Process Manager receives USR1 it sends TERM to all of the FastCGI applications it spawned and then exits (its gets restarted by Apache).  This means that, under Apache/mod_fastcgi, a FastCGI application that receives USR1 from Apache will also receive TERM from the process manager.  FastCGI applications expected to be run under the control of mod_fastcgi/Apache should handle USR1 by finishing any request in process and then shutting down.</p>

<p>TERM is the standard signal sent to applications to request shutdown.  Typically, this is considered a request for "clean" shutdown, i.e. finish anything your in the middle of (within reason), free resources such as database connections, and exit.  When Apache receives TERM, it does not finish handling requests in progress.  Whether or not you finish any request in process when TERM is received is your decision, but keep in mind that under mod_fastcgi/Apache the TERM may be a "graceful" request in disguise.  I always finish any request in process before exiting.</p>

<p>Handling signals can be tricky.  Consult the documentation for your language and system for restrictions and idiosyncrasies.  In general, its always best to do as little as possible from within a signal handler.</p>
</li>

&lt;!-- ==== Separator for us humans ==== --&gt;
&lt;!-- ==== Separator for us humans ==== --&gt;
&lt;!-- ==== Separator for us humans ==== --&gt;
&lt;!-- ==== Separator for us humans ==== --&gt;

</ul>

  </div>

  <div class="clear-block clear">
    <div class="meta">
    
    </div>

      </div>

</div>	</div> <!-- end content -->
	<div id="footer">
		© Copyright 1996 - 2008 Open Market, Rob Saccoccio &amp; others, All rights reserved. <a href="https://web.archive.org/web/20130123131717/http://www.cosmicsitedesign.com/">Web design</a> by CosmicSiteDesign.com
	</div> <!-- end footer -->
</div> <!-- end wrapper -->








<!--
     FILE ARCHIVED ON 13:17:17 janv. 23, 2013 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 15:13:02 avr. 10, 2016.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
</body></html>